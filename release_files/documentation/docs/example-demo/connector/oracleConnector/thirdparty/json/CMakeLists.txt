CMAKE_MINIMUM_REQUIRED(VERSION 2.8.8)

SET(MAC_OS OFF CACHE BOOL "")

IF(${CMAKE_SYSTEM_NAME} MATCHES "Linux")
    MESSAGE(STATUS "PLATFORM = LINUX")
ELSEIF(${CMAKE_SYSTEM_NAME} MATCHES "Darwin")
    MESSAGE(STATUS "PLATFORM = MAC OS")
    SET(MAC_OS ON)
ENDIF()

IF(MAC_OS)
    SET (CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -stdlib=libstdc++")
ENDIF()

FILE(GLOB JSONCPP_SRC RELATIVE ${CMAKE_CURRENT_SOURCE_DIR} "src/lib_json/*.cpp")

INCLUDE_DIRECTORIES(
    ${CMAKE_SOURCE_DIR}/include
)

SET (CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wno-conversion -Wno-sign-compare")
add_library(jsoncpp ${JSONCPP_SRC})
SET_TARGET_PROPERTIES(jsoncpp PROPERTIES COMPILE_FLAGS -fPIC)
