<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="generator" content="ReText Webpages generator 4.0.0">
<link rel="stylesheet" type="text/css" href="style.css">
<title>SRCH2: Configuration</title>
</head>

<body>

<table style="width:100%;table-layout:fixed" >
<tr>
<td id="sideBarTd" style="width:25%">
<div id="sidebar"> <!-- Sidebar -->
<div id="linkpool" > <!-- Links to main pages, id=linkpool-->
<table><tbody><tr><td>
&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="./main.html">Main page</a><br><br>
&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="./install.html">Install</a><br><br>
&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="./configuration.html">Configuration</a><br><br>
&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="./restful-search.html">RESTful API: Search</a><br><br>
&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="./restful-insert-update-delete.html">RESTful API: Insert/Update/Delete</a><br><br>
&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="./restful-control.html">RESTful API: Control</a><br><br>
&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="./ranking.html">Ranking</a><br><br>
&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="./geo.html">Geo Search</a><br><br>
&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="./mongodb.html">MongoDB Search</a><br><br>
</td></tr></tbody></table>

<span ><a href="http://www.srch2.com" target="_blankt"><img style="width:100px" src="images/logo.png"></a></span>
</div> <!-- Links to main pages, id=linkpool-->

<hr>

<div id="content" > <!-- Table of content, id=content-->
<table><tbody><tr><td>
<div><h3><a style="text-decoration: none;color:#ee2e24" href="#doc">Content</a></h3></div>
&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#overview">1. Overview</a><br><br>
&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#srch2Home">2. SRCH2HOME</a></br><br>
&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#licenseFile">3. License File</a></br><br>
&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#listeningHostname">4. Hostname & Port</a></br><br>
&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#dataDir">5. Data Directory</a></br><br>
&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#data">6. Data Source Information</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#dataSource">6.1. Data Source Type</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#dataFile">6.2. Data File</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#mongodb">6.3. MongoDB</a></br><br>
&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#indexConfig">7. Index Config</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#indexType">7.1. Index Type</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#fieldBoost">7.2. Field Boosts</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#recordBoostField">7.3. Record Boost Field</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#defaultQueryTermBoost">7.4. Default Query Term Boost</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#enablePositionIndex">7.5. Enable Positional Index</a></br><br>
&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#queryConfig">8. Query Parameters</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#rankingAlgorithm">8.1. Ranking</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#fuzzyMatchPenalty">8.2. Fuzzy Match Penalty</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#queryTermSimilarityThreshold">8.3. Term Similarity Threshold</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#supportSwapInEditDistance">8.4. Support Swap in Edit Distance</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#prefixMatchPenalty">8.5. Prefix Match Penalty</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#cacheSize">8.6. Cache Size</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#rows">8.7. Rows to be returned</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#maxSearchThreads">8.8. Searcher Threads</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#fieldBasedSearch">8.9. Enabling Field Based Search</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#searcherType">8.10. Search Type</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#queryTermFuzzyType">8.11. Term Fuzzy Type</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#queryTermPrefixType">8.12. Term Prefix Type</a></br><br>
&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#queryResponseWriter">9. Response Writer</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#ResponseContent">9.1. Response Content</a></br><br>
&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#updateHandler">10. Update Handler</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#maxDocs">10.1. Max Documents</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#mergePolicy">10.2. Merge Policy</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#updateLog">10.3. Logging</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#logLevel">10.3.1. Log Level</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#accessLogFile">10.3.2. Log File</a></br><br>
&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#schemaTag">11. Data Schema</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#uniqueKey">11.1. Primary Key</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#fields">11.2. Field Declaration</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#facetEnabled">11.3. Enable Facets</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#facetFields">11.4. Facet Field Declaration</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#analyzer">11.5. Analyzer</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#PorterStemFilter">11.5.1 Stemmer</a></br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#StopFilter">11.5.2 Stop Words</a></br><br>
</td></tr></tbody></table>

</div>

<!-- Table of content, id=content-->

<p></div> <!-- Sidebar --></p>
</td>

<td id="docBody" style="width:70%">
<br/>
<div><table><tbody><tr><td>
<div><h3><a style="text-decoration: none;color:#ee2e24" href="#doc"></a></h3></div>

</td>

<p></tr></tbody></table></div></p>
<h1 id="doc" style="color:#ee2e24"><center>SRCH2 Manual: Engine Configuration</center></h1>
<h6 id="versionInfo" style="font-size: 12px; margin-top: -20px;"><center>Version: 4.2.0, Date: November 27, 2013</center></h6>
<h2 id="overview">1. Overview</h2>
<p>The SRCH2 engine can be customized using a configuration file in XML. This documentation describes the details of how to do this configuration.  The package includes a sample <a href="example-demo/srch2-config.xml">configuration file</a>.  Each parameter in the file can have one of the following two labels: "Required" means this tag has to be present in the configuration file, and "Optional" means this tag does not need to be present.</p>
<p>Tag names and tag attribute names (but not values) are case insensitive.</p>
<h2 id="srch2Home">2. SRCH2 Home Directory, Required</h2>
<pre><code>&lt;srch2Home&gt;/path/to/srch2/home/directory&lt;/srch2Home&gt;
</code></pre>

<p>This parameter specifies the installation folder of the SRCH2 engine,
which includes the binary, a folder "example-demo" with a movie
example, a license file, and other files needed by the engine. Other
file paths used in the configuration should be relative to this home
path. For example, if we give the engine a data file at
"/usr/joe/srch2/example-data/sample-data.json", and the SRCH2 home
directory is set to "/usr/joe/srch2", then the configuration file
should reference the data file's location as
"example-data/sample-data.json".</p>
<h2 id="licenseFile">3. License Key File, Required</h2>
<pre><code>&lt;licenseFile&gt;/path/to/srch2_license_key.txt&lt;/licenseFile&gt;
</code></pre>

<p>It specifies a license key file required by the engine. Enter your email <a href="http://www.srch2.com/downloads.html">here</a> to get a free trial key. <br></p>
<h2 id="listeningHostname">4. Hostname and Port, Required</h2>
<pre><code>&lt;listeningHostname&gt;127.0.0.1&lt;/listeningHostname&gt;
&lt;listeningPort&gt;8081&lt;/listeningPort&gt;
</code></pre>

<p>This parameter is the network identification (i.e., IP address or host name) of the server on which the SRCH2 engine is running.
NOTE: If you want the server to accept all incoming packets, use "<b>0.0.0.0</b>" (without the quote).</p>
<h2 id="dataDir">5. Data Directory, Required</h2>
<pre><code>&lt;dataDir&gt;/path/to/data/directory/&lt;/dataDir&gt;
</code></pre>

<p>It specifies the path of a folder where the engine stores serialized index files. <br></p>
<h2 id="data">6. Data</h2>
<h3 id="dataSource">6.1. Data Source, Optional</h3>
<pre><code>&lt;dataSourceType&gt;1&lt;/dataSourceType&gt;
</code></pre>

<p>It specifies the type of data source to build the indexes from.</p>
<blockquote>
<p>1: json data file. (Default)
 2: MongoDB.</p>
</blockquote>
<h3 id="dataFile">6.2. Data File, Required if "dataSourceType" is 1</h3>
<pre><code>&lt;dataFile&gt;./example-demo/data.json&lt;/dataFile&gt;
</code></pre>

<p>It specifies a JSON data file to be loaded by the engine. Notice that it is a path relative to <a href="#srch2Home">srch2Home</a>.<br></p>
<h3 id="mongodb">6.3. MongoDB, Required if "dataSourceType" is 2</h3>
<pre><code>&lt;mongodb&gt;
    &lt;host&gt;www.my-company.com&lt;/host&gt;
    &lt;port&gt;1234&lt;/port&gt;
    &lt;db&gt;database-name&lt;/db&gt;
    &lt;collection&gt;collection-name&lt;/collection&gt;
    &lt;listenerWaitTime&gt;3&lt;/listenerWaitTime&gt;
&lt;/mongodb&gt; 
</code></pre>

<p>It specifies MongoDB instance information. Note: "listenerWaitTime" specifies how frequently (in seconds) the SRCH2 engine pulls changes from the MongoDB instance (e.g., every 3 seconds). </p>
<h2 id="indexConfig">7. Index Config:</h2>
<p>This tag includes parameters related to customizing the indexes.</p>
<pre><code>&lt;indexConfig&gt;
...
&lt;/indexConfig&gt;
</code></pre>

<h3 id="indexType">7.1. Index Type, Required</h3>
<pre><code>&lt;indexType&gt;0&lt;/indexType&gt;
</code></pre>

<blockquote>
<p>0: Text Indexes; <br>
1: Text + Geo Indexes, which support location-based search. <br></p>
</blockquote>
<h3 id="fieldBoost">7.2. Field Boosts, Optional</h3>
<pre><code>&lt;fieldBoost&gt;&lt;/fieldBoost&gt;
</code></pre>

<p>It specifies boost values for the <a href="#indexConfig">searchable attributes</a>. A boost value is in the range [1,100]. If the value is outside the range, it will be set to 1. For example, the boost values for three searchable attributes can be specified as: <br></p>
<pre><code>&lt;fieldBoost&gt;title^2 director^1&lt;/fieldBoost&gt;
</code></pre>

<p>This parameter, together with the following parameters, is used in the
<a href="ranking.html">ranking function</a> of the engine.  The reason they are
under the "indexConfig" tag is that they are used to compute static
scores during the constructions of the indexes.  There are also
parameters under the "<a href="#queryConfig">query</a>" tag that are used to
compute query-specific scores. </p>
<p>Notice that the fields are separated by a single white space. If a
value is not provided for a field, the engine uses a default value of
1. In the example above, the filed "title" will have a boost value of
1.<br></p>
<h3 id="recordBoostField">7.3. Record Boost Field, Optional</h3>
<pre><code>&lt;recordBoostField&gt;relevance&lt;/recordBoostField&gt;
</code></pre>

<p>It specifies an attribute whose value is used as the score (boost value) of a record. The attribute's type should be "float".</p>
<h3 id="defaultQueryTermBoost">7.4. Default Query Term Boost, Optional</h3>
<pre><code>&lt;defaultQueryTermBoost&gt;1&lt;/defaultQueryTermBoost&gt;
</code></pre>

<p>It specifies a default query term boost. If the parameter is not given, the engine uses 1 as the default value.<br></p>
<h3 id="enablePositionIndex">7.5. Enable Positional Index, Optional</h3>
<p>A positional index supports queries with conditions related to keyword positions in a record, such as <a href="restful-search.html#proximitySearch">proximity search</a>. The "enablePositionIndex" tag can be used to enable or disable positional indexing.  For instance, the following
example shows how to enable this indexing:</p>
<pre><code>&lt;enablePositionIndex&gt;1&lt;/enablePositionIndex&gt;
</code></pre>

<p>Notice that the positional index takes more memory resources. By default it is disabled.<br></p>
<h2 id="queryConfig">8. Query Parameters:</h2>
<p>The following tag includes parameters related to queries.</p>
<pre><code>&lt;query&gt;
...
&lt;/query&gt;
</code></pre>

<h3 id="rankingAlgorithm">8.1. Ranking:</h3>
<p>The following tags and parameters are related to ranking. </p>
<pre><code>&lt;rankingAlgorithm&gt;
     &lt;recordScoreExpression&gt;idf_score*doc_boost&lt;/recordScoreExpression&gt;
&lt;/rankingAlgorithm&gt;
</code></pre>

<p>This expression is used to compute the static score of a record with respect to a term.  It is computed during index construction and stored in the indexes statically.  It can use the following parameters:</p>
<ul>
<li><b>idf_score</b>: internal IDF score;</li>
<li><b>doc_boost</b>: the boost value of the record as specified in an attribute;</li>
<li><b>doc_length</b>: number of unique keywords in the record.</li>
</ul>
<p>The expression allows operators such as +, -, /, *, (, ), 0-9, etc.  Check the <a href="ranking.html">Ranking Section</a> to see how this static score is used in ranking.</p>
<h3 id="fuzzyMatchPenalty">8.2. Fuzzy Match Penalty, Optional</h3>
<pre><code>&lt;fuzzyMatchPenalty&gt;0.9&lt;/fuzzyMatchPenalty&gt;
</code></pre>

<p>It is used to decide how much penalty we want to give to a fuzzy
match. See the <a href="ranking.html">Ranking Section</a> section about how this
parameter is used. Its default value is 0.5.</p>
<h3 id="queryTermSimilarityThreshold">8.3. Term Similarity Threshold, Optional</h3>
<pre><code>&lt;queryTermSimilarityThreshold&gt;0.75&lt;/queryTermSimilarityThreshold&gt;
</code></pre>

<p>It specifies how much error tolerance we want to have for this term in
fuzzy search. Its value must lie in [0,1], with 1 representing exact
match, and 0 being the largest possible error tolerance. Its default
value is 0.5.</p>
<p>This threshold is normalized by the length of the query term. The
engine uses the following formula the compute the edit distance
threshold for this term: floor((1-queryTermSimilarityThreshold) <em>
length(query term)). For instance, suppose the query term is
"schwarazenneggar", and queryTermSimilarityThreshold is 0.8.  Then the
threshold of edit distance for this term is: floor((1-0.8)</em>16) = 3.</p>
<h3>8.4. Support Swap as an Edit Distance Operation</h3>
<p>Optional{id="supportSwapInEditDistance"}</p>
<pre><code>&lt;supportSwapInEditDistance&gt;true&lt;/supportSwapInEditDistance&gt;
</code></pre>

<p>It specifies whether we support swap operation (e.g., "iphone" versus
"ipohne") in the edit distance function, in addition to insertion,
deletion, and substitution operations. By default it is true.</p>
<h3 id="prefixMatchPenalty">8.5. Prefix Match Penalty, Optional</h3>
<pre><code>&lt;prefixMatchPenalty&gt;0.95&lt;/prefixMatchPenalty&gt;
</code></pre>

<p>It specifies the penalty for a prefix match. Its value should be in the range of 0 to 1, with a default value of 0.95. See the <a href="ranking.html">ranking section</a> for more information.<br></p>
<h3 id="cacheSize">8.6. Cache Size, Optional</h3>
<pre><code>&lt;cacheSize&gt;65536000&lt;/cacheSize&gt;
</code></pre>

<p>It specifies the number of bytes used in caching. The number should be in the range [52428800,524288000] ([50MB, 500MB]). Its default value is 52428800 (50MB). <br></p>
<h3 id="rows">8.7. Default value for number of returned results, Optional</h3>
<pre><code>&lt;rows&gt;10&lt;/rows&gt;
</code></pre>

<p>It specifies the number of results retrieved. Its default value is 10. <br></p>
<h3 id="maxSearchThreads">8.8. Number of search threads, Optional:</h3>
<pre><code>&lt;maxSearchThreads&gt;2&lt;/maxSearchThreads&gt;
</code></pre>

<p>It specifies the number of threads that serve search requests. Its default value is 1. <br></p>
<h3 id="fieldBasedSearch">8.9. Field-Based Search, Optional</h3>
<pre><code>&lt;fieldBasedSearch&gt;0&lt;/fieldBasedSearch&gt;
</code></pre>

<p>It is a flag to toggle attribute-based search. An attribute-based search applies conditions that determine in which attributes a keyword should appear.<br></p>
<blockquote>
<p>0: Disabled <br>
1: Enabled <br></p>
</blockquote>
<p>Note that if field-based search is enabled, the number of searchable attributes as specified in <a href='#fields'>fields</a> is limited to 31.</p>
<h3 id="searcherType">8.10. Search Type, Optional</h3>
<pre><code>&lt;searcherType&gt;0&lt;/searcherType&gt;
</code></pre>

<p>It sets the default search type of a query to the engine. <br></p>
<blockquote>
<p>0: finding the top relevant results; <br>
1: finding all matching results. <br></p>
</blockquote>
<p>Its default value is 0.<br></p>
<h3 id="queryTermFuzzyType">8.11. Query Term Fuzzy Type, Optional</h3>
<pre><code>&lt;queryTermFuzzyType&gt;1&lt;/queryTermFuzzyType&gt;
</code></pre>

<p>It specifies how to treat a term by default with respect to match fuzziness.</p>
<blockquote>
<p>0: exact match;<br>
1: fuzzy match.<br></p>
</blockquote>
<p>Its default value is 0.</p>
<h3 id="queryTermPrefixType">8.12. Query Term Prefix Type, Optional</h3>
<pre><code>&lt;queryTermPrefixType&gt;1&lt;/queryTermPrefixType&gt;
</code></pre>

<p>It specifies how to treat a term by default with respect to match completeness.</p>
<blockquote>
<p>0: prefix match;<br>
1: complete match.<br></p>
</blockquote>
<p>Its default value is 0.</p>
<h2 id="queryResponseWriter">9. Response Writer:</h2>
<p>This tag has parameters related to configuring the response of a query.</p>
<pre><code>&lt;queryResponseWriter&gt;
...
&lt;/queryResponseWriter&gt;
</code></pre>

<h3 id="ResponseContent">9.1. Response Content, Optional</h3>
<p>It specifies the format of each JSON search response. You should set the type to one of the following options: <br></p>
<blockquote>
<p>0: format "rid,edit_dist,matching_prefix,in_memory_record"; <br>
1: format "rid,edit_dist,matching_prefix". <br>
2: format "rid,edit_dist,matching_prefix,fields_to_return". <br></p>
</blockquote>
<p>Its default value is 0. If it is 2, it should also include a comma-separated list of fields. The following are two examples:</p>
<pre><code>&lt;responseContent type=&quot;0&quot;&gt;&lt;/responseContent&gt;
</code></pre>

<p>or</p>
<pre><code>&lt;responseContent type=&quot;2&quot;&gt;lat,lng&lt;/responseContent&gt;
</code></pre>

<h2 id="updateHandler">10. Update Handler</h2>
<p>This tag includes tags related to configuring the engine to handle update requests.</p>
<pre><code>&lt;updatehandler&gt;
...
&lt;/updatehandler&gt;
</code></pre>

<h3 id="maxDocs">10.1. Maximum Number of Documents, Required</h3>
<pre><code>&lt;maxDocs&gt;15000000&lt;/maxDocs&gt;
</code></pre>

<p>It specifies the maximum number of records indexable by the engine. Inserting more records than what is specified here will cause the insertions to fail.</p>
<h3 id="mergePolicy">10.2. Merge Policy, Required</h3>
<pre><code>&lt;mergePolicy&gt;
    &lt;mergeEveryNSeconds&gt;10&lt;/mergeEveryNSeconds&gt;
    &lt;mergeEveryMWrites&gt;100&lt;/mergeEveryMWrites&gt;
&lt;/mergePolicy&gt;
</code></pre>

<ul>
<li>
<p><b>mergeEveryNSeconds</b>: The engine uses a background thread to periodically merge the data changes to the indexes. This parameter sets the number of seconds this background thread sleeps before it wakes up and does the merge. Note that decreasing this number may increase latency in the engine's search response time.  This number should be at least 1 (second).</p>
</li>
<li>
<p><b>mergeEveryMWrites</b>: Another event that can trigger the background thread to do the merge is the number of data changes (inserts, deletes, and updates). This parameter specifies the number of record changes that can wake up the thread to do the merge.  This number should be at least 1. <br></p>
</li>
</ul>
<h3 id="updateLog">10.3. Logging:</h3>
<p>The following tag includes parameters related to logging in SRCH2.</p>
<pre><code>&lt;updateLog&gt;
...
&lt;/updateLog&gt;
</code></pre>

<h4 id="logLevel">10.3.1. Log Level, Optional</h4>
<pre><code>&lt;logLevel&gt;3&lt;/logLevel&gt;
</code></pre>

<p>The parameter decides the amount of feedback information the engine will report in its log. <br></p>
<blockquote>
<p>0: SILENT <br>
1: ERROR <br>
2: WARNING <br>
3: INFO <br></p>
</blockquote>
<p>Its default value is 3.</p>
<h4 id="accessLogFile">10.3.2. Log File, Required</h4>
<pre><code>&lt;accessLogFile&gt;./indexes/log.txt&lt;/accessLogFile&gt;
</code></pre>

<p>It specifies the file to which the engine writes logging information.
We can use third-party tools such as
<a href="http://linuxcommand.org/man_pages/logrotate8.html">logrotate</a> to
manage the log messages.  Check <a href="restful-control.html#reset-log">this
page</a> for more information about how
to manage this log file using third-party tools such as "logrotate".<br></p>
<h2 id="schemaTag">11. Data Schema:</h2>
<p>The following sections explain each sub-tag under the <i>schema</i>
component.</p>
<pre><code>&lt;schema name=&quot;SRCH2&quot; version=&quot;3&quot;&gt;
...
&lt;/schema&gt;
</code></pre>

<h3 id="uniqueKey">11.1. Primary Key, Required</h3>
<pre><code>&lt;uniqueKey&gt;id&lt;/uniqueKey&gt;
</code></pre>

<p>It specifies the attribute used as the primary key to reference each record in the data. If a new record has a primary key conflicting with an existing record, the new record will be rejected by the engine. The attribute needs to be of text type.<br></p>
<h3 id="fields">11.2. Fields, Required</h3>
<pre><code>&lt;fields&gt;
...
&lt;/fields&gt;
</code></pre>

<p>Here is an example:</p>
<pre><code>&lt;field name=&quot;category&quot; type=&quot;text&quot; searchable=&quot;true&quot; /&gt;
&lt;field name=&quot;name&quot; type=&quot;text&quot; indexed=&quot;true&quot; /&gt;
&lt;field name=&quot;model&quot; default=&quot;benz&quot; required=&quot;true&quot; type=&quot;text&quot; refining=&quot;true&quot;/&gt;
&lt;field name=&quot;price&quot; default=&quot;200&quot; required=&quot;true&quot; type=&quot;float&quot; refining=&quot;true&quot;/&gt;
&lt;field name=&quot;likes&quot; default=&quot;0&quot; required=&quot;true&quot; type=&quot;integer&quot; refining=&quot;true&quot;/&gt;
&lt;field name=&quot;seller_id&quot; default=&quot;12324,546436,576864&quot; required=&quot;false&quot; type=&quot;integer&quot; refining=&quot;true&quot; multivalued=&quot;true&quot;&gt;
</code></pre>

<p>These parameters give information about each field, including its name, type, and certain properties. <br></p>
<ul>
<li>"name": the name of the field<br></li>
<li>"type": the type of the field. The following are supported types: text, integer, float, time, location_longitude (for geo search), and location_latitude (for geo search).</li>
</ul>
<p>The engine supports the following formats of time and date: <br></p>
<ul>
<li>HH:MM:SS<br></li>
<li>MM/DD/YY<br></li>
<li>YYYY-MM-DD HH:MM::SS<br></li>
<li>YYYYMMDDHHMMSS<br></li>
<li>YYYYMMDDHHMM<br></li>
<li>YYYYMMDD<br></li>
</ul>
<p>The engine supports time durations of the format "{An integer}{A date/time constant}", in which date and time constants are: SECOND, SECONDS, MINUTE, MINUTES, HOUR, HOURS, DAY, DAYS, WEEK, WEEKS, MONTH, MONTHS, YEAR, YEARS.  Examples are: "DAY" (meaning 1 day) or "34WEEKS" (meaning 34 weeks).<br></p>
<p>Each field has certain properties:</p>
<ul>
<li><b>required</b>: The flag indicates whether this field can be empty or not. It is false by default.<br></li>
<li><b>default</b>: It gives the default value of this field if the value is missing.<br></li>
<li><b>searchable</b>: If it is true, then the engine will include its values in the indexes to support keyword search on this field.<br></li>
<li><b>refining</b>: If it is true, then the engine will include its values in the indexes to support post-processing operations on query results, such as additional filtering predicates (e.g., "price &lt; 20"), sort, and facet.<br></li>
<li><b>indexed</b>: If this flag is true, then the engine will treat it as both a searchable and a refining attribute. <br></li>
<li><b>multivalued</b>: If this flag is true, then this attribute is considered as a multi-valued attribute. If so, then the corresponding JSON value in the data file must be a valid array in JSON (e.g. [1245332,3435645,53465,6456745]). Also please note that if the attribute is multi-valued, the value of the 'default' property must be a comma-separated list of values.<br></li>
</ul>
<p>In the example above, we can do keyword search on the attributes
"category" and "name".  We can do post-processing on attributes
"name", "model", "price", "likes" and "seller_id".</p>
<p>Note:</p>
<ul>
<li>For geo search, two fields are required with the types location_latitude and location_longitude, respectively. The values of these geo fields should be a float type in the data file.<br></li>
<li>The primary key is optional to be included here. It can also be searchable and/or refining.<br></li>
<li>There must be at least one searchable field.</li>
</ul>
<h3 id="facetEnabled">11.3. Enable Facet, Optional</h3>
<p>It toggles faceted search feature.<br></p>
<pre><code>&lt;facetEnabled&gt;true&lt;/facetEnabled&gt;
</code></pre>

<p>Its value is either false (facet search disabled) or true (enabled). Its default value is false.<br></p>
<h3 id="facetFields">11.4. Facet Fields:</h3>
<p>This tag contains all facet-related tags.</p>
<pre><code>&lt;facetFields&gt;
...
&lt;/facetFields&gt;
</code></pre>

<p>Facet fields: Required if facet is enabled <br></p>
<pre><code>          &lt;facetField name=&quot;genre&quot; facetType=&quot;categorical&quot;/&gt;
          &lt;facetField name=&quot;year&quot;  facetType=&quot;range&quot; facetStart=&quot;1990&quot; facetEnd=&quot;2050&quot; facetGap=&quot;10&quot;/&gt;
</code></pre>

<blockquote>
<ul>
<li>name: The name of the field used for this facet. It must
correspond to a refining field specified in the <a href=#fields>field
tag</a>. <br> </li>
<li>facetType: Categorical or range. <br></li>
<li>facetStart: The start point of making a range facet. It is
required for a range facet. The value will be ignored for categorical
facets. <br> </li>
<li>facetEnd: The end point of a range facet. It is required for a
range facet. The value will be ignored for categorical facets. <br> </li>
<li>facetGap: The increment amount used for a range facet. The value
will be ignored for categorical facets. <br> </li>
</ul>
</blockquote>
<p>Note: facet ranges are created in correspondence with the "facetStart"
value, not the "facetEnd" value. Therefore, the last interval may not
stretch the entire facetGap. Also all facet fields must be declared in
<a href=#fields>fields tag</a> as well (with refining="true") <br> </p>
<h3 id="analyzer">11.5. Analyzer:</h3>
<p>It specifies the analyzer used by the engine. <br></p>
<pre><code>&lt;types&gt;
  &lt;fieldType name=&quot;text_en&quot;&gt;
    &lt;analyzer&gt;
    ...
    &lt;/analyzer&gt;
  &lt;/fieldType&gt;
&lt;/types&gt;
</code></pre>

<h3 id="PorterStemFilter">11.5.1 Stemmer, Optional</h3>
<p>The engine supports <a href="http://tartarus.org/martin/PorterStemmer/">Porter Stemming</a>. It uses a dictionary file with keywords that should be ignored by the stemmer. Keywords not in the dictionary will go through a sequence of stemming rules.  If no file if provided, the stemmer is disabled.</p>
<pre><code>&lt;filter name=&quot;PorterStemFilter&quot; dictionary=&quot;srch2_stemmer_dictionary.txt&quot; /&gt;
</code></pre>

<h3 id="StopFilter">11.5.2 Stop Words, Optional</h3>
<p>It specifies a file of stop words that are ignored by the engine. Providing an empty string ("") for the "words" parameter disables this filter.</p>
<pre><code>&lt;filter name=&quot;StopFilter&quot; words=&quot;srch2_stop_words.txt&quot; /&gt;
</code></pre>

</table>
<hr>

<link rel="stylesheet" type="text/css" href="documentation.css">

<script type="text/javascript" src="setSizes.js"></script>
<script>

setSizes();
window.onresize = setSizes
</script>

<script language="javascript"> 
months = ['January', 'Febraury', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']; 
var theDate = new Date(document.lastModified); 
theDate.setHours(theDate.getHours() - 7)
with (theDate) { 
document.write("<div align=right>Last Updated: " + months[getMonth()] + ' ' + getDate()  +', ' + getFullYear() +', ' + getHours() + ':' + ("0" + getMinutes()).slice(-2) + " PST  </div>") 
} 
</script>

</body>
</html>
