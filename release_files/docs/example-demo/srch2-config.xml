<!--
    Configuration file for SRCH2 search server. 

    For more information about how to use this configuration file, please
    visit http://www.srch2.com/downloads.html and select the correct
    documentation version.

    Please email contact@srch2.com if you have questions.
-->
 
<config>
    <srch2Home></srch2Home>
        <!-- Make sure to specify the home of your SRCH2 installation.  Example: 
	  <srch2Home>/home/joe/srch2</srch2Home>
        -->
 
    <licenseFile>srch2_license_key.txt</licenseFile>
 
    <listeningHostname>0.0.0.0</listeningHostname>
    <listeningPort>8081</listeningPort>
 
    <dataDir>./indexes</dataDir>
     
    <dataSourceType>1</dataSourceType>
    
    <dataFile>example-demo/sample-data.json</dataFile>

    <!-- 
        Mongo Db settings
        Required if dataSourceType = 2
    -->
    <!--
    <mongodb>
        <host></host>
        <port></port>
        <db></db>
        <collection></collection>
    </mongodb> 
    -->     
         
    <indexConfig>
         
        <indexType>0</indexType>
         
        <supportSwapInEditDistance>true</supportSwapInEditDistance>

        <fieldBoost>title^2 director^1</fieldBoost>

        <defaultQueryTermBoost>1</defaultQueryTermBoost>
    
    </indexConfig>
  
  
    <query>
        <rankingalgorithm>
            <recordScoreExpression>idf_score*doc_boost</recordScoreExpression>
        </rankingalgorithm>
 
        <queryTermSimilarityBoost>0.5</queryTermSimilarityBoost>
         
         
        <queryTermSimilarityThreshold>0.5</queryTermSimilarityThreshold>
        
        
        <queryTermLengthBoost>0.5</queryTermLengthBoost>
         
         
        <prefixMatchPenalty>0.95</prefixMatchPenalty>
 
        <cacheSize>65536000</cacheSize>

        <rows>10</rows>

        <maxSearchThreads>2</maxSearchThreads>
        
        <fieldBasedSearch>1</fieldBasedSearch>
         
        <searcherType>0</searcherType>
         
        <queryTermMatchType>1</queryTermMatchType>
         
        <queryTermType>0</queryTermType>
 
        <queryResponseWriter>

            <responseFormat>1</responseFormat>

        </queryResponseWriter>

    </query>
  
    <updatehandler>

        <maxDocs>15000000</maxDocs>
 
        <maxMemory>10000000</maxMemory>
        
        <mergePolicy>

          <mergeEveryNSeconds>10</mergeEveryNSeconds>

          <mergeEveryMWrites>10</mergeEveryMWrites>

        </mergePolicy>
         
         
        <updateLog>

            <logLevel>3</logLevel>
                         
            <accessLogFile>./logs/srch2-log.txt</accessLogFile>

        </updateLog>
     
    </updatehandler>
</config>

<schema name="SRCH2" version="3">
   <fields>
      <field name="title" type="text" indexed="true"/>
      <field name="director" type="text" indexed="true"/>
      <field name="genre" type="text" indexed="false" refining="true"
             default="HORROR" required="false"/>
      <field name="year"  type="float"  indexed="false" refining="true"
             default="2000" required="false"/>
      <field name="id" type="text" indexed="false"/>
   </fields>
   
   <uniqueKey>id</uniqueKey>
       
   <facetEnabled>true</facetEnabled>
    
    <facetFields>
      <facetField name="genre" facetType="categorical"/>
      <facetField name="year"  facetType="range" facetStart="1990" facetEnd="2050" facetGap="10"/>
    </facetFields>
    
    <types>
      <fieldType name="text_en">
          <analyzer>

              <filter name="PorterStemFilter" dictionary="" />
               
              <filter name="StopFilter" words="" />
               
          </analyzer>
      </fieldType>
   </types>
</schema>
