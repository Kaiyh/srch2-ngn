<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="generator" content="ReText 4.0.0">
<title>restful-control</title>
</head>
<body>
<table style="width:100%;table-layout:fixed" ><tr>
<td id="sideBarTd" style="width:25%"> 
<div id="sidebar"> <!-- Sidebar -->
<div id="linkpool" > <!-- Links to main pages, id=linkpool-->
<table><tbody><tr><td>
&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="./main.html">Main page</a><br><br>
&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="./install.html">Install</a><br><br>
&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="./configuration.html">Configuration</a><br><br>
&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="./restful-search.html">RESTful API : Search</a><br><br>
&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="./restful-insert-update-delete.html">RESTful API : Insert/Update/Delete</a><br><br>
&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="./restful-control.html">RESTful API : Control</a><br><br>
&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="./ranking.html">Ranking</a></br><br>
&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="./geo.html">Geo Search</a></br><br>
&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="./mongodb.html">MongoDB Search</a></br><br>
</td></tr></tbody></table>

<span ><a  href="http://www.srch2.com" target="_blankt"><img  style="width:100px" src="images/logo.png"/></a></span></br></br>
</div> <!-- Links to main pages, id=linkpool-->

<hr/>

<div id="content" > <!-- Table of content, id=content-->
<table><tbody><tr><td>
<div><h3><a style="text-decoration: none;color:#ee2e24" href="#doc">Content</a></h3></div>
&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#system-status">1. Retrieving System Status</a><br><br>
&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#serialize-indexes">2. Serializing Indexes to Disk</a><br><br>
&nbsp;&nbsp;&nbsp;<a style="text-decoration: none;color:#3366FF" href="#serialize-data">3. Serializing Data to Disk</a><br><br>

</td></tr></tbody></table>

<p></div> <!-- Table of content, id=content-->
</div> <!-- Sidebar --></p>
</td>

<td id="docBody" style="width:70%">
</br>
<div><table><tbody><tr><td>
<div><h3><a style="text-decoration: none;color:#ee2e24" href="#doc"></a></h3></div>

</td>

<p></tr></tbody></table></div></p>
<h1 id="doc" style="color:#ee2e24"><center>SRCH2 Manual: RESTful API - Control</center></h1>
<h6 id="versionInfo" style="font-size: 12px; margin-top: -20px;"><center>Version: 4.0.0, Date: September 19, 2013</center></h6>
<h2 id="system-status">1. Retrieving System Status</h2>
<p>This API returns the information about the system status. The response body will contain a JSON map with these fields:</p>
<ul>
<li>"search_requests": the number of queries received by the server so far;</li>
<li>"write_requests": number of insert/delete requests received by the server so far;</li>
<li>"docs_in_index": number of documents in the indexes;</li>
<li>"last_merge": last time (UTC time) the inserted/deleted documents are merged into the indexes;</li>
<li>"last_merge_time": the time spent to merge the inserted/deleted documents into the indexes;</li>
<li>"version": version of this engine.</li>
</ul>
<p>Here is an example query: </p>
<pre><code>$ curl -i &quot;http://localhost:8081/info&quot;
</code></pre>

<p>Here is an example response:</p>
<pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=UTF-8
Content-Length: 138
Date: Thu, 19 Sep 2013 18:52:52 GMT

[{search_requests:0,write_requests:100,docs_in_index:100,&quot;last_merge&quot;:&quot;09/19/13 18:52:48&quot;,&quot;last_merge_time&quot;:&quot;0&quot;,&quot;doc_count&quot;:&quot;100&quot;}, 4.0.0]
</code></pre>

<h2 id="serialize-indexes">2. Serializing Indexes to Disk</h2>
<p>This API serializes the indexes, with all the changes made so far, to files in the path specified by the parameter "dataDir" in the configuration file. Here is an example: </p>
<pre><code class="python">$ curl -i &quot;http://localhost:8081/save&quot; -X PUT
</code></pre>

<h2 id="serialize-data">3. Serializing Data to Disk</h2>
<p>This API serializes the data, with all the changes made so far, to a file in the path specified by the parameter "dataDir" in the configuration file. Deleted records will be ignored. The request can specify the file name as well, using a variable called "exported_data_file". Here is an example: </p>
<pre><code>$ curl -i &quot;http://localhost:8081/export?exported_data_file=mydata.json&quot; -X PUT
</code></pre>

<p><hr/>
Have fun SRCHing!</p>
<p><link rel="stylesheet" type="text/css" href="documentation.css"></p>
<script type="text/javascript" src="setSizes.js"></script>

<script>

setSizes();
window.onresize = setSizes
</script>
</body>
</html>
